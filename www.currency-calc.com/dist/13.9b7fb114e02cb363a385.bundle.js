(window.webpackJsonpEntryPoint=window.webpackJsonpEntryPoint||[]).push([[13],{87:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=(n=["\n\tcursor: pointer;\n\tcolor: #6A7088;\n\tdisplay: inline-block;\n\tfont-weight: 700;\n\tpadding-bottom: 5px;\n\twidth: 50px;\n\ttext-align: center;\n\t",";\n"],r=["\n\tcursor: pointer;\n\tcolor: #6A7088;\n\tdisplay: inline-block;\n\tfont-weight: 700;\n\tpadding-bottom: 5px;\n\twidth: 50px;\n\ttext-align: center;\n\t",";\n"],Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}}))),c=u(a(0)),s=u(a(153)),l=u(a(10)),p=a(1),d=u(a(2));function u(e){return e&&e.__esModule?e:{default:e}}var m=l.default.a(i,function(e){return e.isActive?"font-weight: 900; color: #0047CC; border-bottom: 1px solid #0047CC;":""}),f=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.renderGraph=n.renderGraph.bind(n),n.onChangeDays=n.onChangeDays.bind(n),n.state={days:30,min:null,max:null,performance:{today:1,mtd:2,ytd:20}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),o(t,[{key:"componentDidMount",value:function(){this.renderGraph()}},{key:"componentDidUpdate",value:function(e){void 0!==this.myChart&&(e.days==this.props.days&&e.currencyTo==this.props.currencyTo&&e.currencyFrom==this.props.currencyFrom||(this.myChart.destroy(),this.renderGraph()))}},{key:"renderGraph",value:function(){var e=this;fetch("/api/historical_for_graph/"+this.props.currencyFrom.code+"/"+this.props.currencyTo.code+"/"+this.state.days).then(function(e){return 200==e.status?e.json():[]}).then(function(t){var a=null,n=null;t.values.forEach(function(e){(null==a||e<a)&&(a=e),(null==n||n<e)&&(n=e)}),e.setState({min:a,max:n}),e.setState({performance:t.performance}),e.myChart=new s.default(e.el,{type:"line",data:{labels:t.dates,datasets:[{label:t.label,data:t.values,lineTension:.1,fill:!0,borderColor:"rgba(0,71,204,1)",borderWidth:2,radius:3,backgroundColor:"rgba(217,231,255, 0.5)"}]},options:{tooltips:{mode:"index",intersect:!1,hover:{mode:"nearest",intersect:!0},callbacks:{title:function(){return e.props.currencyFrom.code+"/"+e.props.currencyTo.code},label:function(a,n){return t.dates[a.index]+" 1 "+e.props.currencyFrom.code+" = "+t.values[a.index]+" "+e.props.currencyTo.code}}},scales:{y:{scaleLabel:{display:!0,labelString:t.currency1Code},display:!0,ticks:{beginAtZero:!1,callback:function(t,a,n){var r=(new DOMParser).parseFromString("<!doctype html><body>"+e.props.currencyTo.sign_pre,"text/html").body.textContent;return r.length>0?r+" "+t:t+" "+e.props.currencyTo.code}}}}}})})}},{key:"componentWillUnmount",value:function(){}},{key:"onChangeDays",value:function(e){var t=this;this.setState({days:e},function(){void 0!==t.myChart&&(t.myChart.destroy(),t.renderGraph())})}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"container__graph"},c.default.createElement("div",{className:"graph__diagram"},c.default.createElement("div",{className:"graph--date-row"},[7,30,90,365].map(function(t){return c.default.createElement("span",null,c.default.createElement(m,{isActive:e.state.days==t,onClick:function(){e.onChangeDays(t)}},t," ",(0,p.get_lang)("graph_sufix_day"))," ")}),c.default.createElement("span",{className:"graph--currency-variation"},(0,p.get_lang)("graph_min"),": $",this.state.min," - ",(0,p.get_lang)("graph_max"),": $",this.state.max)),c.default.createElement("div",{style:{position:"relative",width:"100%"}},c.default.createElement("canvas",{ref:function(t){return e.el=t}}))),void 0!==this.state.performance&&c.default.createElement("div",{className:"container__variation"},c.default.createElement("div",{className:"variation"},c.default.createElement("div",{className:"variation__title"},(0,p.parse_vars)((0,p.get_lang)("performance_variation_today"),{})),c.default.createElement("div",{className:""},c.default.createElement("span",{className:"variation__value"},"$ ",this.state.performance.today),c.default.createElement("span",{className:"variation__perzentil variation__perzentil--"+(this.state.performance.today_percent>.01?"up":"down")},c.default.createElement("img",{src:"/img/icons/triangle_"+(this.state.performance.today_percent>.01?"up":"down")+".svg",className:"percentil--img"}),this.state.performance.today_percent>.01?"+":"-",Math.abs(this.state.performance.today_percent),"%"))),c.default.createElement("div",{className:"variation"},c.default.createElement("div",{className:"variation__title"},(0,p.parse_vars)((0,p.get_lang)("performance_variation_mtd"),{month_number:(new Date).getMonth()+1,month:(0,p.jsUcfirst)((new Date).toLocaleString(p.langMeta[this.context.lang.code].bcp47,{month:"long"}))})),c.default.createElement("div",{className:""},c.default.createElement("span",{className:"variation__value"},"$ ",this.state.performance.mtd),c.default.createElement("span",{className:"variation__perzentil variation__perzentil--"+(this.state.performance.mtd_percent>.01?"up":"down")},c.default.createElement("img",{src:"/img/icons/triangle_"+(this.state.performance.mtd_percent>.01?"up":"down")+".svg",className:"percentil--img"}),this.state.performance.mtd_percent>.01?"+":"-",Math.abs(this.state.performance.mtd_percent),"%"))),c.default.createElement("div",{className:"variation"},c.default.createElement("div",{className:"variation__title"},(0,p.parse_vars)((0,p.get_lang)("performance_variation_ytd"),{year:(new Date).getFullYear()})),c.default.createElement("div",{className:""},c.default.createElement("span",{className:"variation__value"},"$ ",this.state.performance.ytd),c.default.createElement("span",{className:"variation__perzentil variation__perzentil--"+(this.state.performance.ytd_percent>.01?"up":"down")},c.default.createElement("img",{src:"/img/icons/triangle_"+(this.state.performance.ytd_percent>.01?"up":"down")+".svg",className:"percentil--img"}),this.state.performance.ytd_percent>.01?"+":"-",Math.abs(this.state.performance.ytd_percent),"%")))))}}]),t}();f.contextType=d.default,t.default=f}}]);